<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curtosis</title>
    <link rel="stylesheet" href="styleform.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.3.2/math.min.js"></script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
</head>
<body>
    <main>
        <h1>Curtosis</h1>
        
        <section>
            <h2>¿Qué es la Curtosis?</h2>
            <p>La curtosis mide la forma de la distribución de los datos, indicando si los valores extremos son más o menos frecuentes que en una distribución normal. Puede ser mesocúrtica (normal), leptocúrtica (valores extremos más frecuentes) o platicúrtica (valores extremos menos frecuentes).</p>
        </section>
        
        <section>
            <h2>Fórmula de la Curtosis</h2>
            <p>La curtosis se calcula con la siguiente fórmula:</p>
            <p id="formula">\[ K = \frac{\frac{1}{n} \sum (x_i - \bar{x})^4}{\left( \frac{1}{n} \sum (x_i - \bar{x})^2 \right)^2} \]</p>
            <p>Donde:</p>
            <ul>
                <li>\( x_i \) son los valores del conjunto de datos.</li>
                <li>\( \bar{x} \) es la media de los datos.</li>
                <li>\( n \) es el número total de datos.</li>
                <li>\( \sum (x_i - \bar{x})^4 \) es la suma de las diferencias a la cuarta potencia respecto a la media.</li>
                <li>\( \sum (x_i - \bar{x})^2 \) es la suma de las diferencias al cuadrado respecto a la media.</li>
            </ul>
        </section>
        
        <section>
            <h2>Calculadora de Curtosis</h2>
            <label for="datos">Ingresa los datos separados por comas:</label>
            <textarea id="datos" placeholder="Ejemplo: 5,10,15,20,25"></textarea>
            <button onclick="calcularCurtosis()">Calcular</button>
            <div id="resultado"></div>
        </section>

        <section>
            <h2>Gráfica de los Datos</h2>
            <div id="grafica" style="width: 100%; height: 400px;"></div>
        </section>
    </main>
    
    <script>
        function calcularCurtosis() {
            let inputDatos = document.getElementById("datos").value;
            let valores = inputDatos.split(',').map(Number).filter(n => !isNaN(n));
            
            if (valores.length === 0) {
                document.getElementById("resultado").innerHTML = "Por favor, ingresa datos válidos.";
                return;
            }
            
            let media = math.mean(valores);
            let n = valores.length;
            let varianza = math.variance(valores, 'unbiased');
            let m4 = math.mean(valores.map(x => Math.pow(x - media, 4)));
            let curtosis = m4 / Math.pow(varianza, 2);
            
            let sumatoria = valores.map(x => `( ${x} - ${media.toFixed(2)} )^4`).join(' + ');
            let formulaHTML = `\[ K = \frac{\frac{1}{${n}} (${sumatoria})}{( \frac{1}{${n}} \sum (x_i - \bar{x})^2 )^2} \]`;
            document.getElementById("formula").innerHTML = formulaHTML;
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, "formula"]);
            
            document.getElementById("resultado").innerHTML = `<p>Curtosis: ${curtosis.toFixed(2)}</p>`;
            
            let myChart = echarts.init(document.getElementById('grafica'));
            let option = {
                xAxis: { type: 'category', data: valores.map((_, index) => `Dato ${index + 1}`) },
                yAxis: { type: 'value' },
                series: [{ data: valores, type: 'bar' }]
            };
            myChart.setOption(option);
        }
    </script>
</body>
</html>